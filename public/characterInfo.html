<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link href="assets/css/main.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
</head>

<body>
    <div class="p-2 mb-2 bg-dark text-white border border-info">
        <!-- Trigger/Open The Modal -->
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <a class="navbar-brand" href="#"> <img src="./assets/js/Character.png" alt="Smiley face" height="42"
                    width="42"> </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
                aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavDropdown">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="changelog.html">ChangeLog</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="about_us.html">About Us</a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="#">Character Information</a>
                    </li>
                    <h1 class="page-header">Project Title</h1>
                </ul>
            </div>
            <button id="myBtn" class="btn btn-primary" onclick="showModal()">Login/Signup</button>
        </nav>

        <main role="main">
            <div class="bg-dark">
                <div class="container">
                    <table class="table table-dark">
                        <thead class="inventory">
                            <tr>
                                <th scope="col"></th>
                                <th scope="col">Name</th>
                                <th scope="col">Type</th>
                            </tr>
                        </thead>
                        <tbody class="inventory" id="inventory">

                        </tbody>
                    </table>

                </div>

            </div>


        </main>

        <!-- The Modal -->
        <div id="myModal" class="modal">

            <!-- Modal content -->
            <div class="modal-content">
                <span class="close">&times;</span>
                <form class="form-signin">

                    <h1 class="h3 mb-3 font-weight-normal">Please sign in</h1>
                    <label for="email" class="sr-only">Email address</label>
                    <input type="email" id="email" class="form-control" placeholder="Email address" required autofocus>
                    <label for="password" class="sr-only">Password</label>
                    <input type="password" id="password" class="form-control" placeholder="Password" required>
                    <!--<a class="btn btn-lg btn-primary btn-block" onClick="signIn()">Sign in</a>-->
                    <a class="btn btn-lg btn-primary btn-block" href="game.html">Sign in</a>
                    <a href="signup.html">Don't have an account? Sign up here.</a>
                </form>
            </div>
        </div>

    </div>

    <script src="assets/js/indexScript.js"></script>
    <script>
    function getCookie(cname) {
      var name = cname + "=";
      var decodedCookie = decodeURIComponent(document.cookie);
      var ca = decodedCookie.split(';');
      for(var i = 0; i <ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
          c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
          return c.substring(name.length, c.length);
        }
      }
      return "";
    };
    var x = getCookie("_id").split(':');
    x = x[1];
    var result = x.substring(1, x.length-1);
    x.slice(1,-1);
    console.log(x);
    var data = {
      id: x,
    };
    $.ajax({
      type: 'POST',
      url: '/getInventory',
      data,
      success: function (data) {
        console.log(data);
        data.items.forEach((item, i) => {
          var myHtmlContent = '<th scope="row"><img src="'+ item.image + '" style="width:130px;height:120px;object-fit: cover;"></th> <td>' + item.name + '</td> <td>'+ item.type+'</td>';
          var tableRef = document.getElementById('inventory');

          var newRow = tableRef.insertRow(tableRef.rows.length);
          newRow.innerHTML = myHtmlContent;
        });

      },
      error: function (xhr) {
        console.log("no Inventory" + JSON.stringify(xhr));
      }
    });


    </script>
</body>

</html>
